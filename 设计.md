

#### 总体设计思路

从理论上来看，taskgraph的运行模式就像是一个DAG有向无环图。每一个任务都是一个节点，节点的先后关系就是

方向。整个taskgraph的运行逻辑大致如下图



从图中看，我们会先运行那些和其他节点没有先后关系的任务，即他们的入度为0。

当我们运行完这些节点之后，我们会访问他们的下一个节点。这时候如果一个节点有多个前置条件，即入度>1那么我们就会将这个值-1。当入度为0的时候，我们将其在即次加入到运行队列中。当他们有多个前置节点的时候，这些节点应该是并行的，因此到底由那个前置节点让该节点入队，则是看线程的运行情况了。

因此，节点类设置如下

```c++
class Node
{
    
}
```

 这些节点通过graph类创建，该类用于管理节点和创建节点

运行时，我们会先遍历整个图，然后将所有入度为0的节点入队，然后在进行运行

当所有节点都运行完毕后就结束运行



#### 优化和改进思路

目前来说可以优化的点在于第一是实现的优化

目前的实现方式为动态创建线程，这其实没啥必要。这里可以优化为开始创建一定的数量的线程，然后根据运行顺序去获取执行的任务



另外的一个方向为，将runner拆分，增加一个taskmanager,允许动态增加图









让B不空转

优化数据结构

XXX